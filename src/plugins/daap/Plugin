target="daap"
source=["daap_xform.c", "daap_cmd.c", "daap_conn.c", "daap_util.c", "daap_md5.c", "cc_handlers.c"]

def config(env):
	try:
		env.pkgconfig("avahi-glib")
		env.pkgconfig("avahi-client")
		source.append("daap_mdns_avahi.c")
	except ConfigError:
		try:
			env.checkheader("dns_sd.h")
			# on macosx it's in libc? 
			if env.platform != "darwin":
				env.checklib("dns_sd", "DNSServiceRegister")
			source.append("daap_mdns_dnssd.c")
		except ConfigError:
			source.append("daap_mdns_dummy.c")
